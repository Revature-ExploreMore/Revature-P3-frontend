<!-- Cart details needs to have a Checkout button router linked -->
<div
  class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow"
>
  <div class="container">
    <div class="py-5 text-center">
      <h2>Checkout form</h2>
    </div>
    <div class="row">
      <!---------------------------------------------------------------- Cart Begins --------------------------------------------------------------------->
      <div class="col-md-4 order-md-2 mb-4">


        <h4 class="d-flex justify-content-between align-items-center mb-3">
          <span class="text-muted">Your cart</span>
          <span class="badge badge-secondary badge-pill">3</span>
        </h4>


        <!-- Ng For for all the cart items -->
        <ul class="list-group mb-3">


          <li
            class="list-group-item d-flex justify-content-between lh-condensed"
          >
            <div>
              <h6 class="my-0">Product name</h6>
              <small class="text-muted">Brief description</small>
            </div>
            <span class="text-muted">$12</span>
          </li>


          <li
            class="list-group-item d-flex justify-content-between lh-condensed"
          >
            <div>
              <h6 class="my-0">Second product</h6>
              <small class="text-muted">Brief description</small>
            </div>
            <span class="text-muted">$8</span>
          </li>


          <li
            class="list-group-item d-flex justify-content-between lh-condensed"
          >
            <div>
              <h6 class="my-0">Third item</h6>
              <small class="text-muted">Brief description</small>
            </div>
            <span class="text-muted">$5</span>
          </li>


          <li class="list-group-item d-flex justify-content-between bg-light">
            <div class="text-success">
              <h6 class="my-0">Promo code</h6>
              <small>EXAMPLECODE</small>
            </div>
            <span class="text-success">-$5</span>
          </li>


          <!-- Calculate total of cart items----------------------------->
          <li class="list-group-item d-flex justify-content-between">
            <span>Total (USD)</span>
            <strong>$20</strong>
          </li>


          
        </ul>
<!------------------------------- End of list ------------------------------->

        <form class="card p-2">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Promo code" />
            <div class="input-group-append">
              <button type="submit" class="btn btn-secondary">Redeem</button>
            </div>
          </div>
        </form>
      </div>
      <!------------------------------------ Cart END ----------------------------------------------------------------------------------------->
      <div class="col-md-8 order-md-1">


        <h4 class="mb-3">Billing address</h4>


        <form [formGroup]="checkoutFormGroup" (ngSubmit)="addPaymentInfo()">
          <!-- Beginning of Billing Address Form Group---------------------->
          <div formGroupName="customerBilling" class="form-group">
            <div class="row">


              <div class="col-md-6 mb-3">
                <label for="firstName">First name</label>
                <input
                  type="text"
                  class="form-control"
                  id="firstName"
                  placeholder=""
                  value=""
                  required
                />
                <div *ngIf="!checkoutFormGroup.valid">
                  Valid first name is required.
                </div>
              </div>


              <div class="col-md-6 mb-3">
                <label for="lastName">Last name</label>
                <input
                  type="text"
                  class="form-control"
                  id="lastName"
                  placeholder=""
                  value=""
                  required
                />
                <div class="invalid-feedback">Valid last name is required.</div>
              </div>
            </div>

            <div class="mb-3">
              <label for="street">Street</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">@</span>
                </div>
                <input
                  type="text"
                  formControlName="street"
                  id="street"
                  placeholder="123 main st"
                  
                />
                <div *ngIf="billingAddressStreet?.invalid &&  billingAddressStreet?.touched" class="text-danger small">
                  <div *ngIf="billingAddressStreet?.errors?.['required']">
                  please enter a valid street.
                </div>
                </div>
              </div>
            </div>


            <div class="mb-3">
              <label for="city"
                >City <span class="text-muted">(Required)</span></label
              >
              <div class="input-group">
                <input
                  type="text"
                  placeholder="New York"
                  formControlName="city"
                />
                <div *ngIf="billingAddressCity?.invalid &&  billingAddressCity?.touched" class="text-danger small">
                  <div *ngIf="billingAddressCity?.errors?.['required']">
                  please enter a city name.
                </div>
                </div>
              </div>
            </div>


            <div class="row">


              <div class="col-md-5 mb-3">
                <label for="country">Country</label>
                <select
                  type="text"
                  class="custom-select d-block w-100"
                  id="country"
                  required
                >
                  <option value="">Choose...</option>
                  <option>United States</option>
                </select>
                <div >
                </div>
              </div>


              <div class="col-md-4 mb-3">
                <label for="state">State</label>
                <select
                  type="text"
                  formControlName="state"
                  class="custom-select d-block w-100"
                  id="state"
                  required
                >
                  <option value="">Choose...</option>
                  <option>California</option>
                  <option *ngFor="let country of countries">
                      {{country.name}}
                  </option>
                    
                  
                </select>
                <div class="invalid-feedback">
                  Please provide a valid state.
                </div>
              </div>


              <div class="col-md-3 mb-3">
                <label for="zip">Zip</label>
                <input
                  type="text"
                  formControlName="zipCode"
                  id="zip"
                  placeholder=""
                  required
                />
                <div *ngIf="billingAddressZipCode?.invalid && (billingAddressZipCode?.dirty || billingAddressZipCode?.touched)" class="text-danger small">
                  <div *ngIf="billingAddressZipCode?.errors?.['required']">
                      Zip code is required
                  </div>
                  <div *ngIf="billingAddressZipCode?.errors?.['minlength']">
                      Zip code must be at least 2 characters long
                  </div>
              </div>
              </div>


            </div>

          </div>

          

            
            <!----------------------------------------- Shipping Address Begins ---------------------------------------------->

            <!------------------------------------------ Billing Address And Shipping Address Form Group End------------------------------------->
          
    <div formGroupName="paymentInfo" class="form-group">

          <hr class="mb-4" />
          <h4 class="mb-3">Payment</h4>
          <div class="d-block my-3">
            <div class="row">
              <div class="col-md-2"><label>Card Type</label></div>
              <div class="col-md-9">
                <div class="input-space">
                  <select formControlName="cardType">
                    <option>Visa</option>
                    <option>Mastercard</option>
                  </select>
                  <div *ngIf="creditCardType?.invalid && (creditCardType?.dirty || creditCardType?.touched)" class="text-danger small">
                    <div *ngIf="creditCardType?.errors?.['required']">
                        Credit card type is required
                    </div>
                </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">


            <div class="col-md-6 mb-3">
              <label for="cc-name">Name on card</label>
              <input
                type="text"
                class="form-control"
                id="cc-name"
                placeholder=""
                required
                
              />
              <small class="text-muted">Full name as displayed on card</small>
              <div class="invalid-feedback">Name on card is required</div>
            </div>


            <div class="col-md-6 mb-3">
              <label for="cc-number">Credit card number</label>
              <input
                type="password"
                class="form-control"
                id="cc-number"
                placeholder=""
                required
                formControlName="cardNumber"
              />
              <div *ngIf="creditCardNumber?.invalid && (creditCardNumber?.dirty || creditCardNumber?.touched)" class="text-danger small">
                <div *ngIf="creditCardNumber?.errors?.['required']">
                    Card number is required
                </div>
                <div *ngIf="creditCardNumber?.errors?.['pattern']">
                    Card number must be 16 digits long
                </div>
            </div>
            </div>


          </div>
          <div class="row">


            <div class="col-md-3 mb-3">
              <label for="cc-expiration">Expiration</label>
              <input
                type="text"
                class="form-control"
                id="cc-expiration"
                placeholder=""
                required
                formControlName="expDate"
              />
              <div *ngIf="creditCardExpDate?.invalid && (creditCardExpDate?.dirty || creditCardExpDate?.touched)" class="text-danger small">
                <div *ngIf="creditCardExpDate?.errors?.['required']">
                    date required
                </div>
                <div *ngIf="creditCardExpDate?.errors?.['pattern']">
                    please enter a valid date (yyyy-mm-dd)
                </div>
            </div>
            </div>


            <div class="col-md-3 mb-3">
              <label for="cc-expiration">CVV</label>
              <input
                type="text"
                class="form-control"
                id="cc-cvv"
                placeholder=""
                required
                formControlName="cvv"
              />
              <div *ngIf="creditCardSecurityCode?.invalid && (creditCardSecurityCode?.dirty || creditCardSecurityCode?.touched)" class="text-danger small">
                <div *ngIf="creditCardSecurityCode?.errors?.['required']">
                    Security code is required
                </div>
                <div *ngIf="creditCardSecurityCode?.errors?.['pattern']">
                    Security code must be 3 digits long
                </div>
            </div>
            </div>
          </div>

          <!-- Horizontal line -->
          <hr class="mb-4" />

          <!-- Submit Button -->
          <button class="btn btn-primary btn-lg btn-block" type="submit">
            Continue to Order Details
          </button>

    </div>
        </form>
        <!------------------------------- LAST FORM TAG--------------------------------------------------------------------------->
      </div>
    </div>
    <footer class="my-5 pt-5 text-muted text-center text-small">
      <p class="mb-1">&copy; 2022-2023 ExploreMore.com</p>
      <ul class="list-inline">
        <li class="list-inline-item"><a href="#">Privacy</a></li>
        <li class="list-inline-item"><a href="#">Terms</a></li>
        <li class="list-inline-item"><a href="#">Support</a></li>
      </ul>
    </footer>
  </div>
</div>
